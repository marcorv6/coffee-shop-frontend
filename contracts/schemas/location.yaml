# Location Schema - Maloca Coffee Shop
# Collection: locations
# This schema defines store locations/branches

components:
  schemas:
    Location:
      type: object
      description: Ubicación/sucursal de Maloca
      required:
        - id
        - name
        - address
        - isActive
        - operatingHours
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: ID único de la ubicación
          example: "loc_centro"
        
        name:
          type: string
          minLength: 2
          maxLength: 100
          description: Nombre de la sucursal
          example: "Maloca - Centro"
        
        address:
          type: string
          description: Dirección completa
          example: "Av. Reforma 234, Col. Centro, CDMX 06000"
        
        phone:
          type: string
          nullable: true
          description: Teléfono de contacto
          example: "+52 55 1234 5678"
        
        email:
          type: string
          format: email
          nullable: true
          description: Correo de contacto
          example: "centro@maloca.com"
        
        coordinates:
          $ref: '#/components/schemas/GeoCoordinates'
          nullable: true
          description: Coordenadas geográficas
        
        isActive:
          type: boolean
          description: Si la ubicación está activa
          example: true
        
        operatingHours:
          $ref: '#/components/schemas/OperatingHours'
          description: Horario de operación
        
        timezone:
          type: string
          description: Zona horaria
          example: "America/Mexico_City"
        
        settings:
          $ref: '#/components/schemas/LocationSettings'
          nullable: true
        
        createdAt:
          $ref: '../openapi.yaml#/components/schemas/Timestamp'
        
        updatedAt:
          $ref: '../openapi.yaml#/components/schemas/Timestamp'

    GeoCoordinates:
      type: object
      properties:
        latitude:
          type: number
          format: float
          minimum: -90
          maximum: 90
          example: 19.4326
        longitude:
          type: number
          format: float
          minimum: -180
          maximum: 180
          example: -99.1332

    OperatingHours:
      type: object
      description: Horario de operación semanal
      properties:
        monday:
          $ref: '#/components/schemas/DayHours'
        tuesday:
          $ref: '#/components/schemas/DayHours'
        wednesday:
          $ref: '#/components/schemas/DayHours'
        thursday:
          $ref: '#/components/schemas/DayHours'
        friday:
          $ref: '#/components/schemas/DayHours'
        saturday:
          $ref: '#/components/schemas/DayHours'
        sunday:
          $ref: '#/components/schemas/DayHours'

    DayHours:
      type: object
      description: Horario de un día específico
      properties:
        isOpen:
          type: boolean
          description: Si está abierto ese día
          example: true
        open:
          type: string
          pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
          description: Hora de apertura
          example: "07:00"
        close:
          type: string
          pattern: "^([01]?[0-9]|2[0-3]):[0-5][0-9]$"
          description: Hora de cierre
          example: "21:00"
        breaks:
          type: array
          items:
            type: object
            properties:
              start:
                type: string
              end:
                type: string
          nullable: true
          description: Horarios de descanso/cierre temporal

    LocationSettings:
      type: object
      description: Configuraciones específicas de la ubicación
      properties:
        taxRate:
          type: number
          format: float
          description: Tasa de impuesto local
          example: 0.16
        
        currency:
          type: string
          description: Moneda
          example: "MXN"
        
        defaultLanguage:
          type: string
          description: Idioma predeterminado
          example: "es"
        
        acceptsCash:
          type: boolean
          default: true
        
        acceptsCards:
          type: boolean
          default: true
        
        acceptsWallet:
          type: boolean
          default: true
        
        printReceipts:
          type: boolean
          default: true
        
        orderNumberPrefix:
          type: string
          description: Prefijo para números de orden
          example: "ML"

    LocationListResponse:
      type: object
      required:
        - locations
      properties:
        locations:
          type: array
          items:
            $ref: '#/components/schemas/Location'

    LocationCreateRequest:
      type: object
      required:
        - name
        - address
        - operatingHours
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 100
        address:
          type: string
        phone:
          type: string
        email:
          type: string
          format: email
        coordinates:
          $ref: '#/components/schemas/GeoCoordinates'
        operatingHours:
          $ref: '#/components/schemas/OperatingHours'
        timezone:
          type: string
        settings:
          $ref: '#/components/schemas/LocationSettings'

    LocationUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 100
        address:
          type: string
        phone:
          type: string
        email:
          type: string
          format: email
        coordinates:
          $ref: '#/components/schemas/GeoCoordinates'
        isActive:
          type: boolean
        operatingHours:
          $ref: '#/components/schemas/OperatingHours'
        settings:
          $ref: '#/components/schemas/LocationSettings'
